/*! For license information please see app.js.LICENSE.txt */
(()=>{var e={8599:e=>{"use strict";const{AbortController:t,AbortSignal:r}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=r,e.exports.default=t},1909:e=>{e.exports=function(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');return Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e)}},2822:(e,t,r)=>{var i=r(7676),s=r(1909);e.exports=function(e,t,r){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');if(Buffer.alloc)return Buffer.alloc(e,t,r);var n=s(e);return 0===e?n:void 0===t?i(n,0):("string"!=typeof r&&(r=void 0),i(n,t,r))}},7676:e=>{var t=function(){try{if(!Buffer.isEncoding("latin1"))return!1;var e=Buffer.alloc?Buffer.alloc(4):new Buffer(4);return e.fill("ab","ucs2"),"61006200"===e.toString("hex")}catch(e){return!1}}();function r(e,t,r,i){if(r<0||i>e.length)throw new RangeError("Out of range index");return r>>>=0,(i=void 0===i?e.length:i>>>0)>r&&e.fill(t,r,i),e}e.exports=function(e,i,s,n,a){if(t)return e.fill(i,s,n,a);if("number"==typeof i)return r(e,i,s,n);if("string"==typeof i){if("string"==typeof s?(a=s,s=0,n=e.length):"string"==typeof n&&(a=n,n=e.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("latin1"===a&&(a="binary"),"string"==typeof a&&!Buffer.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(""===i)return r(e,0,s,n);if(function(e){return 1===e.length&&e.charCodeAt(0)<256}(i))return r(e,i.charCodeAt(0),s,n);i=new Buffer(i,a)}return Buffer.isBuffer(i)?function(e,t,r,i){if(r<0||i>e.length)throw new RangeError("Out of range index");if(i<=r)return e;r>>>=0,i=void 0===i?e.length:i>>>0;for(var s=r,n=t.length;s<=i-n;)t.copy(e,s),s+=n;return s!==i&&t.copy(e,s,0,i-s),e}(e,i,s,n):r(e,0,s,n)}},1227:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(s=i))})),t.splice(s,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(2447)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,r)=>{e.exports=function(e){function t(e){let r,s,n,a=null;function o(...e){if(!o.enabled)return;const i=o,s=Number(new Date),n=s-(r||s);i.diff=n,i.prev=r,i.curr=s,r=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,s)=>{if("%%"===r)return"%";a++;const n=t.formatters[s];if("function"==typeof n){const t=e[a];r=n.call(i,t),e.splice(a,1),a--}return r})),t.formatArgs.call(i,e),(i.log||t.log).apply(i,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=i,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(s!==t.namespaces&&(s=t.namespaces,n=t.enabled(e)),n),set:e=>{a=e}}),"function"==typeof t.init&&t.init(o),o}function i(e,r){const i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),s=i.length;for(r=0;r<s;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,i;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},9738:(e,t,r)=>{const i=r(6647),s=r(4520),n=r(66),a=r(4064),o=r(9968).version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function u(e){console.log(`[dotenv@${o}][DEBUG] ${e}`)}function c(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function h(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code)throw new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development");throw e}const i=r.password;if(!i)throw new Error("INVALID_DOTENV_KEY: Missing key part");const s=r.searchParams.get("environment");if(!s)throw new Error("INVALID_DOTENV_KEY: Missing environment part");const n=`DOTENV_VAULT_${s.toUpperCase()}`,a=e.parsed[n];if(!a)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${n} in your .env.vault file.`);return{ciphertext:a,key:i}}function d(e){let t=s.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(t=e.path),t.endsWith(".vault")?t:`${t}.vault`}const p={configDotenv:function(e){let t=s.resolve(process.cwd(),".env"),r="utf8";const a=Boolean(e&&e.debug);var o;e&&(null!=e.path&&(t="~"===(o=e.path)[0]?s.join(n.homedir(),o.slice(1)):o),null!=e.encoding&&(r=e.encoding));try{const s=p.parse(i.readFileSync(t,{encoding:r}));let n=process.env;return e&&null!=e.processEnv&&(n=e.processEnv),p.populate(n,s,e),{parsed:s}}catch(e){return a&&u(`Failed to load ${t} ${e.message}`),{error:e}}},_configVault:function(e){console.log(`[dotenv@${o}][INFO] Loading env from encrypted .env.vault`);const t=p._parseVault(e);let r=process.env;return e&&null!=e.processEnv&&(r=e.processEnv),p.populate(r,t,e),{parsed:t}},_parseVault:function(e){const t=d(e),r=p.configDotenv({path:t});if(!r.parsed)throw new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);const i=c(e).split(","),s=i.length;let n;for(let e=0;e<s;e++)try{const t=h(r,i[e].trim());n=p.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=s)throw t}return p.parse(n)},config:function(e){const t=d(e);return 0===c(e).length?p.configDotenv(e):i.existsSync(t)?p._configVault(e):(r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${o}][WARN] ${r}`),p.configDotenv(e));var r},decrypt:function(e,t){const r=Buffer.from(t.slice(-64),"hex");let i=Buffer.from(e,"base64");const s=i.slice(0,12),n=i.slice(-16);i=i.slice(12,-16);try{const e=a.createDecipheriv("aes-256-gcm",r,s);return e.setAuthTag(n),`${e.update(i)}${e.final()}`}catch(e){const t=e instanceof RangeError,r="Invalid key length"===e.message,i="Unsupported state or unable to authenticate data"===e.message;if(t||r)throw new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");if(i)throw new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw console.error("Error: ",e.code),console.error("Error: ",e.message),e}},parse:function(e){const t={};let r,i=e.toString();for(i=i.replace(/\r\n?/gm,"\n");null!=(r=l.exec(i));){const e=r[1];let i=r[2]||"";i=i.trim();const s=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===s&&(i=i.replace(/\\n/g,"\n"),i=i.replace(/\\r/g,"\r")),t[e]=i}return t},populate:function(e,t,r={}){const i=Boolean(r&&r.debug),s=Boolean(r&&r.override);if("object"!=typeof t)throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(const r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===s&&(e[r]=t[r]),i&&u(!0===s?`"${r}" is already defined and WAS overwritten`:`"${r}" is already defined and was NOT overwritten`)):e[r]=t[r]}};e.exports.configDotenv=p.configDotenv,e.exports._configVault=p._configVault,e.exports._parseVault=p._parseVault,e.exports.config=p.config,e.exports.decrypt=p.decrypt,e.exports.parse=p.parse,e.exports.populate=p.populate,e.exports=p},7824:e=>{var t=1e3,r=60*t,i=60*r,s=24*i;function n(e,t,r,i){var s=t>=1.5*r;return Math.round(e/r)+" "+i+(s?"s":"")}e.exports=function(e,a){a=a||{};var o,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(n){var a=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(o=e,(l=Math.abs(o))>=s?n(o,l,s,"day"):l>=i?n(o,l,i,"hour"):l>=r?n(o,l,r,"minute"):l>=t?n(o,l,t,"second"):o+" ms"):function(e){var n=Math.abs(e);return n>=s?Math.round(e/s)+"d":n>=i?Math.round(e/i)+"h":n>=r?Math.round(e/r)+"m":n>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},3300:(e,t,r)=>{"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response},8147:e=>{"use strict";class t extends Error{constructor(e){super(e),this.name="TimeoutError"}}const r=(e,r,i,s)=>{let n;const a=new Promise(((a,o)=>{if("number"!=typeof r||r<0)throw new TypeError("Expected `milliseconds` to be a positive number");r!==1/0?(s={customTimers:{setTimeout,clearTimeout},...s},n=s.customTimers.setTimeout.call(void 0,(()=>{if("function"==typeof i){try{a(i())}catch(e){o(e)}return}const s=i instanceof Error?i:new t("string"==typeof i?i:`Promise timed out after ${r} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(s)}),r),(async()=>{try{a(await e)}catch(e){o(e)}finally{s.customTimers.clearTimeout.call(void 0,n)}})()):a(e)}));return a.clear=()=>{clearTimeout(n),n=void 0},a};e.exports=r,e.exports.default=r,e.exports.TimeoutError=t},4439:(e,t,r)=>{"use strict";var i=r(9530),s=r(2822);e.exports=void 0!==i.timingSafeEqual?function(e,t){var r=String(e),n=String(t),a=Buffer.byteLength(r),o=Buffer.byteLength(n),l=s(a,0,"utf8");l.write(r);var u=s(a,0,"utf8");return u.write(n),i.timingSafeEqual(l,u)&&a===o}:function(e,t){var r=String(e),i=String(t),s=r.length,n=0;s!==i.length&&(i=r,n=1);for(var a=0;a<s;a++)n|=r.charCodeAt(a)^i.charCodeAt(a);return 0===n}},366:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},a=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function o(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,i,s,n,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;n&&(n=0,o[0]&&(a=0)),a;)try{if(r=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var l=r(9061);n(r(9738)).config();var u=r(5474),c=new l.Telegraf("6351553394:AAEX7Vi4TMPiDvVZZE1llAyFAbavYqarxG0");c.command("start",(function(e){e.reply("\n  Привет! Чтобы произвести расчет, отправь список участников и вложенные ими суммы в формате: Имя - сумма, Имя2 - сумма. \n  Участников, сумма вкладов которых равна нулю , можно просто перечислить через запятую, не указывая ноль. Не используй лишние символы и слова при вводе. \n  \n  ❌ Ира1000,Даня - 4000 (имя и сумма не разделены дефисом) \n  ❌ Ира - 100 рублей, Даня-5000 рублей (слово «рублей» - лишнее)\n  ❌ Ира - 1000 Даня - 5000 (отсутствует запятая между участниками)\n  ❌Ира - 1000, Даня, Артем, Саша(Мало того, что вложилась только Ира, так еще и точку в конце ставить было не нужно) \n  ✅ Ира-1000,Даня - 5000\n  ✅Ира - 1000,Даня-5000,Артем,Саша\n  ")})),c.on("text",(function(e){return a(void 0,void 0,void 0,(function(){var t,r,i;return o(this,(function(s){return t=[],console.log(e.message.text.replaceAll(" ","")),(r=e.message.text.replaceAll(" ","")).length?(console.log(r.split(",")),r.split(",").map((function(e){t.push({name:e.split("-")[0],sum:isNaN(Number(e.split("-")[1]))?0:Number(e.split("-")[1])})})),console.log(t)):e.reply("Введите сообщение в нужном формате!"),i=(0,u.calcPeople)(t),console.log(i),e.reply(i),[2]}))}))})),c.launch()},5474:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPeople=void 0,t.calcPeople=function(e){var t,r="",i=0,s=[],n=[],a=function(e,t){return[{name:e.name,balance:t,debts:[]}]};e.map((function(e){return i+=e.sum})),t=i/e.length,e.map((function(e){var r=t-e.sum;r>0?s.push(a(e,r)):n.push(a(e,r))}));for(var o=0;o<s.length;o++)for(var l=0;l<n.length;l++)0!==n[l][0].balance&&0!==s[o][0].balance&&(n[l][0].balance+s[o][0].balance<0?(n[l][0].debts.push({name:s[o][0].name,debt:n[l][0].balance}),s[o][0].balance+=n[l][0].balance,n[l][0].balance=0):(n[l][0].debts.push({name:s[o][0].name,debt:Math.abs(s[o][0].balance)}),n[l][0].balance+=s[o][0].balance,s[o][0].balance=0));return 0===n.length?r="Никто никому ничего не должен или вы ввели некорректный запрос":n.map((function(e){0!==e[0].debts.length&&(r+=e[0].name+", Вы должны ",e[0].debts.map((function(e){r+="персоне "+e.name+" "+e.debt.toFixed(1)+" ₽.\n"})))})),r}},4064:()=>{},6647:()=>{},66:()=>{},4520:()=>{},9530:()=>{},3952:()=>{},3325:()=>{},5437:()=>{},9358:()=>{},1185:()=>{},9732:()=>{},8440:()=>{},1984:()=>{},3306:()=>{},403:()=>{},386:()=>{},9191:()=>{},6273:()=>{},1835:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webApp=t.login=t.pay=t.game=t.switchToCurrentChat=t.switchToChat=t.callback=t.url=t.channelRequest=t.groupRequest=t.botRequest=t.userRequest=t.pollRequest=t.locationRequest=t.contactRequest=t.text=void 0,t.text=function(e,t=!1){return{text:e,hide:t}},t.contactRequest=function(e,t=!1){return{text:e,request_contact:!0,hide:t}},t.locationRequest=function(e,t=!1){return{text:e,request_location:!0,hide:t}},t.pollRequest=function(e,t,r=!1){return{text:e,request_poll:{type:t},hide:r}},t.userRequest=function(e,t,r,i=!1){return{text:e,request_user:{request_id:t,user_is_premium:r},hide:i}},t.botRequest=function(e,t,r=!1){return{text:e,request_user:{request_id:t,user_is_bot:!0},hide:r}},t.groupRequest=function(e,t,r,i=!1){return{text:e,request_chat:{request_id:t,chat_is_channel:!1,...r},hide:i}},t.channelRequest=function(e,t,r,i=!1){return{text:e,request_chat:{request_id:t,chat_is_channel:!0,...r},hide:i}},t.url=function(e,t,r=!1){return{text:e,url:t,hide:r}},t.callback=function(e,t,r=!1){return{text:e,callback_data:t,hide:r}},t.switchToChat=function(e,t,r=!1){return{text:e,switch_inline_query:t,hide:r}},t.switchToCurrentChat=function(e,t,r=!1){return{text:e,switch_inline_query_current_chat:t,hide:r}},t.game=function(e,t=!1){return{text:e,callback_game:{},hide:t}},t.pay=function(e,t=!1){return{text:e,pay:!0,hide:t}},t.login=function(e,t,r={},i=!1){return{text:e,login_url:{...r,url:t},hide:i}},t.webApp=function(e,t,r=!1){return{text:e,web_app:{url:t},hide:r}}},2969:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Composer=void 0;const s=i(r(3152)),n=r(3556),a=r(6641),o=(l=Promise.resolve(),()=>l);var l;class u{constructor(...e){this.handler=u.compose(e)}use(...e){return this.handler=u.compose([this.handler,...e]),this}guard(e,...t){return this.use(u.guard(e,...t))}on(e,...t){return this.use(u.on(e,...t))}hears(e,...t){return this.use(u.hears(e,...t))}command(e,...t){return this.use(u.command(e,...t))}action(e,...t){return this.use(u.action(e,...t))}inlineQuery(e,...t){return this.use(u.inlineQuery(e,...t))}gameQuery(...e){return this.use(u.gameQuery(...e))}drop(e){return this.use(u.drop(e))}filter(e){return this.use(u.filter(e))}entity(e,...t){return this.use(u.entity(e,...t))}email(e,...t){return this.use(u.email(e,...t))}url(e,...t){return this.use(u.url(e,...t))}textLink(e,...t){return this.use(u.textLink(e,...t))}textMention(e,...t){return this.use(u.textMention(e,...t))}mention(e,...t){return this.use(u.mention(e,...t))}phone(e,...t){return this.use(u.phone(e,...t))}hashtag(e,...t){return this.use(u.hashtag(e,...t))}cashtag(e,...t){return this.use(u.cashtag(e,...t))}spoiler(e,...t){return this.use(u.spoiler(e,...t))}start(...e){const t=u.compose(e);return this.command("start",((e,r)=>t(Object.assign(e,{startPayload:e.payload}),r)))}help(...e){return this.command("help",...e)}settings(...e){return this.command("settings",...e)}middleware(){return this.handler}static reply(...e){return t=>t.reply(...e)}static catch(e,...t){const r=u.compose(t);return(t,i)=>Promise.resolve(r(t,i)).catch((r=>e(r,t)))}static fork(e){const t=u.unwrap(e);return async(e,r)=>{await Promise.all([t(e,o),r()])}}static tap(e){const t=u.unwrap(e);return(e,r)=>Promise.resolve(t(e,o)).then((()=>r()))}static passThru(){return(e,t)=>t()}static lazy(e){if("function"!=typeof e)throw new Error("Argument must be a function");return(t,r)=>Promise.resolve(e(t)).then((e=>u.unwrap(e)(t,r)))}static log(e=console.log){return(t,r)=>(e(JSON.stringify(t.update,null,2)),r())}static branch(e,t,r){return"function"!=typeof e?u.unwrap(e?t:r):u.lazy((i=>Promise.resolve(e(i)).then((e=>e?t:r))))}static optional(e,...t){return u.branch(e,u.compose(t),u.passThru())}static filter(e){return u.branch(e,u.passThru(),o)}static drop(e){return u.branch(e,o,u.passThru())}static dispatch(e,t){return u.lazy((r=>Promise.resolve(e(r)).then((e=>t[e]))))}static guard(e,...t){return u.optional((t=>e(t.update)),...t)}static on(e,...t){const r=Array.isArray(e)?e:[e];return u.optional((e=>(e=>{for(const t of r)if("string"!=typeof t?t(e):t in e||"message"in e&&t in e.message)return!0;return!1})(e.update)),...t)}static entity(e,...t){if("function"!=typeof e){const r=d(e);return u.entity((({type:e})=>r.includes(e)),...t)}return u.optional((t=>{var r;const i=null!==(r=t.message)&&void 0!==r?r:t.channelPost;if(void 0===i)return!1;const s=h(i),n=function(e){var t,r;return null==e?[]:"caption_entities"in e?null!==(t=e.caption_entities)&&void 0!==t?t:[]:"entities"in e&&null!==(r=e.entities)&&void 0!==r?r:[]}(i);return void 0!==s&&n.some((r=>e(r,s.substring(r.offset,r.offset+r.length),t)))}),...t)}static entityText(e,t,...r){if(0===r.length)return Array.isArray(t)?u.entity(e,...t):u.entity(e,t);const i=c(t);return u.entity((({type:t},r,s)=>{if(t!==e)return!1;for(const e of i)if(s.match=e(r,s))return!0;return!1}),...r)}static email(e,...t){return u.entityText("email",e,...t)}static phone(e,...t){return u.entityText("phone_number",e,...t)}static url(e,...t){return u.entityText("url",e,...t)}static textLink(e,...t){return u.entityText("text_link",e,...t)}static textMention(e,...t){return u.entityText("text_mention",e,...t)}static mention(e,...t){return u.entityText("mention",d(e,"@"),...t)}static hashtag(e,...t){return u.entityText("hashtag",d(e,"#"),...t)}static cashtag(e,...t){return u.entityText("cashtag",d(e,"$"),...t)}static spoiler(e,...t){return u.entityText("spoiler",e,...t)}static match(e,...t){const r=u.compose(t);return(t,i)=>{var s,n,a,o;const l=null!==(a=null!==(n=null!==(s=h(t.message))&&void 0!==s?s:h(t.channelPost))&&void 0!==n?n:h(t.callbackQuery))&&void 0!==a?a:null===(o=t.inlineQuery)||void 0===o?void 0:o.query;if(void 0===l)return i();for(const s of e){const e=s(l,t);if(e)return r(Object.assign(t,{match:e}),i)}return i()}}static hears(e,...t){return u.on("text",u.match(c(e),...t))}static command(e,...t){if(0===t.length)return u.entity("bot_command",e);const r=c(e),i=(0,n.message)("text"),s=u.compose(t);return u.on(i,((e,t)=>{const{entities:i}=e.message,n=null==i?void 0:i[0];if("bot_command"!==(null==n?void 0:n.type))return t();if(n.offset>0)return t();const o=n.length,l=e.message.text,[u,c]=l.slice(0,o).split("@");if(!u)return t();if(c&&c.toLowerCase()!==e.me.toLowerCase())return t();const h=u.slice(1);for(const n of r)if(n(h,e)){const r=o+1,n=l.slice(r),u=Object.assign(e,{command:h,payload:n,args:[]});let c;return Object.defineProperty(u,"args",{enumerable:!0,configurable:!0,get:()=>null!=c?c:c=(0,a.argsParser)(n,i,r),set(e){c=e}}),s(u,t)}return t()}))}static action(e,...t){return u.on("callback_query",u.match(c(e),...t))}static inlineQuery(e,...t){return u.on("inline_query",u.match(c(e),...t))}static acl(e,...t){if("function"==typeof e)return u.optional(e,...t);const r=Array.isArray(e)?e:[e];return u.optional((e=>!e.from||r.includes(e.from.id)),...t)}static memberStatus(e,...t){const r=Array.isArray(e)?e:[e];return u.optional((async e=>{if(void 0===e.message)return!1;const t=await e.getChatMember(e.message.from.id);return r.includes(t.status)}),...t)}static admin(...e){return u.memberStatus(["administrator","creator"],...e)}static creator(...e){return u.memberStatus("creator",...e)}static chatType(e,...t){const r=Array.isArray(e)?e:[e];return u.optional((e=>{const t=e.chat;return void 0!==t&&r.includes(t.type)}),...t)}static privateChat(...e){return u.chatType("private",...e)}static groupChat(...e){return u.chatType(["group","supergroup"],...e)}static gameQuery(...e){return u.guard((0,n.callbackQuery)("game_short_name"),...e)}static unwrap(e){if(!e)throw new Error("Handler is undefined");return"middleware"in e?e.middleware():e}static compose(e){if(!Array.isArray(e))throw new Error("Middlewares must be an array");return 0===e.length?u.passThru():1===e.length?u.unwrap(e[0]):(t,r)=>{let i=-1;return async function t(n,a){var o;if(!(a instanceof s.default))throw new Error("next(ctx) called with invalid context");if(n<=i)throw new Error("next() called multiple times");i=n;const l=u.unwrap(null!==(o=e[n])&&void 0!==o?o:r);await l(a,(async(e=a)=>{await t(n+1,e)}))}(0,t)}}}function c(e){return Array.isArray(e)||(e=[e]),e.map((e=>{if(!e)throw new Error("Invalid trigger");if("function"==typeof e)return e;if(e instanceof RegExp)return(t="")=>(e.lastIndex=0,e.exec(t));const t=new RegExp(`^${r=e,r.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}$`);var r;return e=>t.exec(e)}))}function h(e){if(null!=e)return"caption"in e?e.caption:"text"in e?e.text:"data"in e?e.data:"game_short_name"in e?e.game_short_name:void 0}function d(e,t=""){return(Array.isArray(e)?e:[e]).filter(Boolean).map((e=>t&&"string"==typeof e&&!e.startsWith(t)?`${t}${e}`:e))}t.Composer=u,u.mount=u.on,t.default=u},3152:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const s=(0,i(r(1227)).default)("telegraf:context");class n{constructor(e,t,r){this.update=e,this.telegram=t,this.botInfo=r,this.state={}}get updateType(){for(const e in this.update)if("object"==typeof this.update[e])return e;throw new Error(`Cannot determine \`updateType\` of ${JSON.stringify(this.update)}`)}get me(){var e;return null===(e=this.botInfo)||void 0===e?void 0:e.username}get tg(){return this.telegram}get message(){return this.update.message}get editedMessage(){return this.update.edited_message}get inlineQuery(){return this.update.inline_query}get shippingQuery(){return this.update.shipping_query}get preCheckoutQuery(){return this.update.pre_checkout_query}get chosenInlineResult(){return this.update.chosen_inline_result}get channelPost(){return this.update.channel_post}get editedChannelPost(){return this.update.edited_channel_post}get callbackQuery(){return this.update.callback_query}get poll(){return this.update.poll}get pollAnswer(){return this.update.poll_answer}get myChatMember(){return this.update.my_chat_member}get chatMember(){return this.update.chat_member}get chatJoinRequest(){return this.update.chat_join_request}get chat(){var e,t,r,i;return null===(i=null!==(r=null!==(t=null!==(e=this.chatMember)&&void 0!==e?e:this.myChatMember)&&void 0!==t?t:this.chatJoinRequest)&&void 0!==r?r:a(this))||void 0===i?void 0:i.chat}get senderChat(){var e;return null===(e=a(this))||void 0===e?void 0:e.sender_chat}get from(){var e,t,r,i,s,n,o,l,u;return null===(u=null!==(l=null!==(o=null!==(n=null!==(s=null!==(i=null!==(r=null!==(t=null!==(e=this.callbackQuery)&&void 0!==e?e:this.inlineQuery)&&void 0!==t?t:this.shippingQuery)&&void 0!==r?r:this.preCheckoutQuery)&&void 0!==i?i:this.chosenInlineResult)&&void 0!==s?s:this.chatMember)&&void 0!==n?n:this.myChatMember)&&void 0!==o?o:this.chatJoinRequest)&&void 0!==l?l:a(this))||void 0===u?void 0:u.from}get inlineMessageId(){var e,t;return null===(t=null!==(e=this.callbackQuery)&&void 0!==e?e:this.chosenInlineResult)||void 0===t?void 0:t.inline_message_id}get passportData(){var e;if(null!=this.message&&"passport_data"in this.message)return null===(e=this.message)||void 0===e?void 0:e.passport_data}get webAppData(){if(!this.message||!("web_app_data"in this.message))return;const{data:e,button_text:t}=this.message.web_app_data;return{data:{json:()=>JSON.parse(e),text:()=>e},button_text:t}}get webhookReply(){return this.telegram.webhookReply}set webhookReply(e){this.telegram.webhookReply=e}assert(e,t){if(void 0===e)throw new TypeError(`Telegraf: "${t}" isn't available for "${this.updateType}"`)}has(e){Array.isArray(e)||(e=[e]);for(const t of e)if("string"!=typeof t?t(this.update):t in this.update)return!0;return!1}answerInlineQuery(...e){return this.assert(this.inlineQuery,"answerInlineQuery"),this.telegram.answerInlineQuery(this.inlineQuery.id,...e)}answerCbQuery(...e){return this.assert(this.callbackQuery,"answerCbQuery"),this.telegram.answerCbQuery(this.callbackQuery.id,...e)}answerGameQuery(...e){return this.assert(this.callbackQuery,"answerGameQuery"),this.telegram.answerGameQuery(this.callbackQuery.id,...e)}answerShippingQuery(...e){return this.assert(this.shippingQuery,"answerShippingQuery"),this.telegram.answerShippingQuery(this.shippingQuery.id,...e)}answerPreCheckoutQuery(...e){return this.assert(this.preCheckoutQuery,"answerPreCheckoutQuery"),this.telegram.answerPreCheckoutQuery(this.preCheckoutQuery.id,...e)}editMessageText(e,t){var r,i,s,n;return this.assert(null!==(r=this.callbackQuery)&&void 0!==r?r:this.inlineMessageId,"editMessageText"),this.telegram.editMessageText(null===(i=this.chat)||void 0===i?void 0:i.id,null===(n=null===(s=this.callbackQuery)||void 0===s?void 0:s.message)||void 0===n?void 0:n.message_id,this.inlineMessageId,e,t)}editMessageCaption(e,t){var r,i,s,n;return this.assert(null!==(r=this.callbackQuery)&&void 0!==r?r:this.inlineMessageId,"editMessageCaption"),this.telegram.editMessageCaption(null===(i=this.chat)||void 0===i?void 0:i.id,null===(n=null===(s=this.callbackQuery)||void 0===s?void 0:s.message)||void 0===n?void 0:n.message_id,this.inlineMessageId,e,t)}editMessageMedia(e,t){var r,i,s,n;return this.assert(null!==(r=this.callbackQuery)&&void 0!==r?r:this.inlineMessageId,"editMessageMedia"),this.telegram.editMessageMedia(null===(i=this.chat)||void 0===i?void 0:i.id,null===(n=null===(s=this.callbackQuery)||void 0===s?void 0:s.message)||void 0===n?void 0:n.message_id,this.inlineMessageId,e,t)}editMessageReplyMarkup(e){var t,r,i,s;return this.assert(null!==(t=this.callbackQuery)&&void 0!==t?t:this.inlineMessageId,"editMessageReplyMarkup"),this.telegram.editMessageReplyMarkup(null===(r=this.chat)||void 0===r?void 0:r.id,null===(s=null===(i=this.callbackQuery)||void 0===i?void 0:i.message)||void 0===s?void 0:s.message_id,this.inlineMessageId,e)}editMessageLiveLocation(e,t,r){var i,s,n,a;return this.assert(null!==(i=this.callbackQuery)&&void 0!==i?i:this.inlineMessageId,"editMessageLiveLocation"),this.telegram.editMessageLiveLocation(null===(s=this.chat)||void 0===s?void 0:s.id,null===(a=null===(n=this.callbackQuery)||void 0===n?void 0:n.message)||void 0===a?void 0:a.message_id,this.inlineMessageId,e,t,r)}stopMessageLiveLocation(e){var t,r,i,s;return this.assert(null!==(t=this.callbackQuery)&&void 0!==t?t:this.inlineMessageId,"stopMessageLiveLocation"),this.telegram.stopMessageLiveLocation(null===(r=this.chat)||void 0===r?void 0:r.id,null===(s=null===(i=this.callbackQuery)||void 0===i?void 0:i.message)||void 0===s?void 0:s.message_id,this.inlineMessageId,e)}sendMessage(e,t){return this.assert(this.chat,"sendMessage"),this.telegram.sendMessage(this.chat.id,e,{message_thread_id:o(this),...t})}reply(...e){return this.sendMessage(...e)}getChat(...e){return this.assert(this.chat,"getChat"),this.telegram.getChat(this.chat.id,...e)}exportChatInviteLink(...e){return this.assert(this.chat,"exportChatInviteLink"),this.telegram.exportChatInviteLink(this.chat.id,...e)}createChatInviteLink(...e){return this.assert(this.chat,"createChatInviteLink"),this.telegram.createChatInviteLink(this.chat.id,...e)}editChatInviteLink(...e){return this.assert(this.chat,"editChatInviteLink"),this.telegram.editChatInviteLink(this.chat.id,...e)}revokeChatInviteLink(...e){return this.assert(this.chat,"revokeChatInviteLink"),this.telegram.revokeChatInviteLink(this.chat.id,...e)}banChatMember(...e){return this.assert(this.chat,"banChatMember"),this.telegram.banChatMember(this.chat.id,...e)}get kickChatMember(){return this.banChatMember}unbanChatMember(...e){return this.assert(this.chat,"unbanChatMember"),this.telegram.unbanChatMember(this.chat.id,...e)}restrictChatMember(...e){return this.assert(this.chat,"restrictChatMember"),this.telegram.restrictChatMember(this.chat.id,...e)}promoteChatMember(...e){return this.assert(this.chat,"promoteChatMember"),this.telegram.promoteChatMember(this.chat.id,...e)}setChatAdministratorCustomTitle(...e){return this.assert(this.chat,"setChatAdministratorCustomTitle"),this.telegram.setChatAdministratorCustomTitle(this.chat.id,...e)}setChatPhoto(...e){return this.assert(this.chat,"setChatPhoto"),this.telegram.setChatPhoto(this.chat.id,...e)}deleteChatPhoto(...e){return this.assert(this.chat,"deleteChatPhoto"),this.telegram.deleteChatPhoto(this.chat.id,...e)}setChatTitle(...e){return this.assert(this.chat,"setChatTitle"),this.telegram.setChatTitle(this.chat.id,...e)}setChatDescription(...e){return this.assert(this.chat,"setChatDescription"),this.telegram.setChatDescription(this.chat.id,...e)}pinChatMessage(...e){return this.assert(this.chat,"pinChatMessage"),this.telegram.pinChatMessage(this.chat.id,...e)}unpinChatMessage(...e){return this.assert(this.chat,"unpinChatMessage"),this.telegram.unpinChatMessage(this.chat.id,...e)}unpinAllChatMessages(...e){return this.assert(this.chat,"unpinAllChatMessages"),this.telegram.unpinAllChatMessages(this.chat.id,...e)}leaveChat(...e){return this.assert(this.chat,"leaveChat"),this.telegram.leaveChat(this.chat.id,...e)}setChatPermissions(...e){return this.assert(this.chat,"setChatPermissions"),this.telegram.setChatPermissions(this.chat.id,...e)}getChatAdministrators(...e){return this.assert(this.chat,"getChatAdministrators"),this.telegram.getChatAdministrators(this.chat.id,...e)}getChatMember(...e){return this.assert(this.chat,"getChatMember"),this.telegram.getChatMember(this.chat.id,...e)}getChatMembersCount(...e){return this.assert(this.chat,"getChatMembersCount"),this.telegram.getChatMembersCount(this.chat.id,...e)}setPassportDataErrors(e){return this.assert(this.from,"setPassportDataErrors"),this.telegram.setPassportDataErrors(this.from.id,e)}sendPhoto(e,t){return this.assert(this.chat,"sendPhoto"),this.telegram.sendPhoto(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithPhoto(...e){return this.sendPhoto(...e)}sendMediaGroup(e,t){return this.assert(this.chat,"sendMediaGroup"),this.telegram.sendMediaGroup(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithMediaGroup(...e){return this.sendMediaGroup(...e)}sendAudio(e,t){return this.assert(this.chat,"sendAudio"),this.telegram.sendAudio(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithAudio(...e){return this.sendAudio(...e)}sendDice(e){return this.assert(this.chat,"sendDice"),this.telegram.sendDice(this.chat.id,{message_thread_id:o(this),...e})}replyWithDice(...e){return this.sendDice(...e)}sendDocument(e,t){return this.assert(this.chat,"sendDocument"),this.telegram.sendDocument(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithDocument(...e){return this.sendDocument(...e)}sendSticker(e,t){return this.assert(this.chat,"sendSticker"),this.telegram.sendSticker(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithSticker(...e){return this.sendSticker(...e)}sendVideo(e,t){return this.assert(this.chat,"sendVideo"),this.telegram.sendVideo(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithVideo(...e){return this.sendVideo(...e)}sendAnimation(e,t){return this.assert(this.chat,"sendAnimation"),this.telegram.sendAnimation(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithAnimation(...e){return this.sendAnimation(...e)}sendVideoNote(e,t){return this.assert(this.chat,"sendVideoNote"),this.telegram.sendVideoNote(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithVideoNote(...e){return this.sendVideoNote(...e)}sendInvoice(e,t){return this.assert(this.chat,"sendInvoice"),this.telegram.sendInvoice(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithInvoice(...e){return this.sendInvoice(...e)}sendGame(e,t){return this.assert(this.chat,"sendGame"),this.telegram.sendGame(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithGame(...e){return this.sendGame(...e)}sendVoice(e,t){return this.assert(this.chat,"sendVoice"),this.telegram.sendVoice(this.chat.id,e,{message_thread_id:o(this),...t})}replyWithVoice(...e){return this.sendVoice(...e)}sendPoll(e,t,r){return this.assert(this.chat,"sendPoll"),this.telegram.sendPoll(this.chat.id,e,t,{message_thread_id:o(this),...r})}replyWithPoll(...e){return this.sendPoll(...e)}sendQuiz(e,t,r){return this.assert(this.chat,"sendQuiz"),this.telegram.sendQuiz(this.chat.id,e,t,{message_thread_id:o(this),...r})}replyWithQuiz(...e){return this.sendQuiz(...e)}stopPoll(...e){return this.assert(this.chat,"stopPoll"),this.telegram.stopPoll(this.chat.id,...e)}sendChatAction(e,t){return this.assert(this.chat,"sendChatAction"),this.telegram.sendChatAction(this.chat.id,e,{message_thread_id:o(this),...t})}async persistentChatAction(e,t,{intervalDuration:r,...i}={}){await this.sendChatAction(e,{...i});const n=setInterval((()=>this.sendChatAction(e,{...i}).catch((e=>{s("Ignored error while persisting sendChatAction:",e)}))),null!=r?r:4e3);try{await t()}finally{clearInterval(n)}}replyWithChatAction(...e){return this.sendChatAction(...e)}sendLocation(e,t,r){return this.assert(this.chat,"sendLocation"),this.telegram.sendLocation(this.chat.id,e,t,{message_thread_id:o(this),...r})}replyWithLocation(...e){return this.sendLocation(...e)}sendVenue(e,t,r,i,s){return this.assert(this.chat,"sendVenue"),this.telegram.sendVenue(this.chat.id,e,t,r,i,{message_thread_id:o(this),...s})}replyWithVenue(...e){return this.sendVenue(...e)}sendContact(e,t,r){return this.assert(this.chat,"sendContact"),this.telegram.sendContact(this.chat.id,e,t,{message_thread_id:o(this),...r})}replyWithContact(...e){return this.sendContact(...e)}getStickerSet(e){return this.telegram.getStickerSet(e)}setChatStickerSet(e){return this.assert(this.chat,"setChatStickerSet"),this.telegram.setChatStickerSet(this.chat.id,e)}deleteChatStickerSet(){return this.assert(this.chat,"deleteChatStickerSet"),this.telegram.deleteChatStickerSet(this.chat.id)}createForumTopic(...e){return this.assert(this.chat,"createForumTopic"),this.telegram.createForumTopic(this.chat.id,...e)}editForumTopic(e){var t;return this.assert(this.chat,"editForumTopic"),this.assert(null===(t=this.message)||void 0===t?void 0:t.message_thread_id,"editForumTopic"),this.telegram.editForumTopic(this.chat.id,this.message.message_thread_id,e)}closeForumTopic(){var e;return this.assert(this.chat,"closeForumTopic"),this.assert(null===(e=this.message)||void 0===e?void 0:e.message_thread_id,"closeForumTopic"),this.telegram.closeForumTopic(this.chat.id,this.message.message_thread_id)}reopenForumTopic(){var e;return this.assert(this.chat,"reopenForumTopic"),this.assert(null===(e=this.message)||void 0===e?void 0:e.message_thread_id,"reopenForumTopic"),this.telegram.reopenForumTopic(this.chat.id,this.message.message_thread_id)}deleteForumTopic(){var e;return this.assert(this.chat,"deleteForumTopic"),this.assert(null===(e=this.message)||void 0===e?void 0:e.message_thread_id,"deleteForumTopic"),this.telegram.deleteForumTopic(this.chat.id,this.message.message_thread_id)}unpinAllForumTopicMessages(){var e;return this.assert(this.chat,"unpinAllForumTopicMessages"),this.assert(null===(e=this.message)||void 0===e?void 0:e.message_thread_id,"unpinAllForumTopicMessages"),this.telegram.unpinAllForumTopicMessages(this.chat.id,this.message.message_thread_id)}editGeneralForumTopic(e){return this.assert(this.chat,"editGeneralForumTopic"),this.telegram.editGeneralForumTopic(this.chat.id,e)}closeGeneralForumTopic(){return this.assert(this.chat,"closeGeneralForumTopic"),this.telegram.closeGeneralForumTopic(this.chat.id)}reopenGeneralForumTopic(){return this.assert(this.chat,"reopenGeneralForumTopic"),this.telegram.reopenGeneralForumTopic(this.chat.id)}hideGeneralForumTopic(){return this.assert(this.chat,"hideGeneralForumTopic"),this.telegram.hideGeneralForumTopic(this.chat.id)}unhideGeneralForumTopic(){return this.assert(this.chat,"unhideGeneralForumTopic"),this.telegram.unhideGeneralForumTopic(this.chat.id)}unpinAllGeneralForumTopicMessages(){return this.assert(this.chat,"unpinAllGeneralForumTopicMessages"),this.telegram.unpinAllGeneralForumTopicMessages(this.chat.id)}setStickerPositionInSet(e,t){return this.telegram.setStickerPositionInSet(e,t)}setStickerSetThumb(...e){return this.telegram.setStickerSetThumbnail(...e)}setStickerSetThumbnail(...e){return this.telegram.setStickerSetThumbnail(...e)}setStickerMaskPosition(...e){return this.telegram.setStickerMaskPosition(...e)}setStickerKeywords(...e){return this.telegram.setStickerKeywords(...e)}setStickerEmojiList(...e){return this.telegram.setStickerEmojiList(...e)}deleteStickerSet(...e){return this.telegram.deleteStickerSet(...e)}setStickerSetTitle(...e){return this.telegram.setStickerSetTitle(...e)}setCustomEmojiStickerSetThumbnail(...e){return this.telegram.setCustomEmojiStickerSetThumbnail(...e)}deleteStickerFromSet(e){return this.telegram.deleteStickerFromSet(e)}uploadStickerFile(...e){return this.assert(this.from,"uploadStickerFile"),this.telegram.uploadStickerFile(this.from.id,...e)}createNewStickerSet(...e){return this.assert(this.from,"createNewStickerSet"),this.telegram.createNewStickerSet(this.from.id,...e)}addStickerToSet(...e){return this.assert(this.from,"addStickerToSet"),this.telegram.addStickerToSet(this.from.id,...e)}getMyCommands(){return this.telegram.getMyCommands()}setMyCommands(e){return this.telegram.setMyCommands(e)}replyWithMarkdown(e,t){return this.reply(e,{parse_mode:"Markdown",...t})}replyWithMarkdownV2(e,t){return this.reply(e,{parse_mode:"MarkdownV2",...t})}replyWithHTML(e,t){return this.reply(e,{parse_mode:"HTML",...t})}deleteMessage(e){if(this.assert(this.chat,"deleteMessage"),void 0!==e)return this.telegram.deleteMessage(this.chat.id,e);const t=a(this);return this.assert(t,"deleteMessage"),this.telegram.deleteMessage(this.chat.id,t.message_id)}forwardMessage(e,t){const r=a(this);return this.assert(r,"forwardMessage"),this.telegram.forwardMessage(e,r.chat.id,r.message_id,t)}copyMessage(e,t){const r=a(this);return this.assert(r,"copyMessage"),this.telegram.copyMessage(e,r.chat.id,r.message_id,t)}approveChatJoinRequest(e){return this.assert(this.chat,"approveChatJoinRequest"),this.telegram.approveChatJoinRequest(this.chat.id,e)}declineChatJoinRequest(e){return this.assert(this.chat,"declineChatJoinRequest"),this.telegram.declineChatJoinRequest(this.chat.id,e)}banChatSenderChat(e){return this.assert(this.chat,"banChatSenderChat"),this.telegram.banChatSenderChat(this.chat.id,e)}unbanChatSenderChat(e){return this.assert(this.chat,"unbanChatSenderChat"),this.telegram.unbanChatSenderChat(this.chat.id,e)}setChatMenuButton(e){return this.assert(this.chat,"setChatMenuButton"),this.telegram.setChatMenuButton({chatId:this.chat.id,menuButton:e})}getChatMenuButton(){return this.assert(this.chat,"getChatMenuButton"),this.telegram.getChatMenuButton({chatId:this.chat.id})}setMyDefaultAdministratorRights(e){return this.telegram.setMyDefaultAdministratorRights(e)}getMyDefaultAdministratorRights(e){return this.telegram.getMyDefaultAdministratorRights(e)}}function a(e){var t,r,i,s,n;return null!==(n=null!==(s=null!==(r=null!==(t=e.message)&&void 0!==t?t:e.editedMessage)&&void 0!==r?r:null===(i=e.callbackQuery)||void 0===i?void 0:i.message)&&void 0!==s?s:e.channelPost)&&void 0!==n?n:e.editedChannelPost}t.Context=n,t.default=n;const o=e=>{const t=a(e);return(null==t?void 0:t.is_topic_message)?t.message_thread_id:void 0}},6641:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsParser=void 0,t.argsParser=function(e,t=[],r=0){const i={};for(const e of t)"text_mention"!==e.type&&"text_link"!==e.type||(i[e.offset-r]=e.length);const s=[];let n,a=0,o="";function l(t){a!==t&&(s.push(o+e.slice(a,t)),n=void 0),o="",a=t+1}for(let t=0;t<e.length;t++){const r=e[t],s=i[t];if(s)l(t),a--,t+=s,l(t);else if("'"===r||'"'===r)if(n){if(n!==r)continue;l(t)}else l(t),n=r;else if(" "===r){if(n)continue;l(t)}else if("\n"===r)l(t);else{if("\\"!==r)continue;o+=e.slice(a,t),a=++t}}return a<e.length&&l(e.length),s}},7893:(e,t)=>{"use strict";function r(e,t){return void 0!==e&&t in e}Object.defineProperty(t,"__esModule",{value:!0}),t.is2D=t.hasPropType=t.hasProp=void 0,t.hasProp=r,t.hasPropType=function(e,t,i){return r(e,t)&&i===typeof e[t]},t.is2D=function(e){return Array.isArray(e[0])}},3377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactOptions=void 0,t.compactOptions=function(e){if(!e)return e;const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(t[r]=e[r]);return t}},6613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkOrMention=t._fmt=t.join=t.FmtString=void 0;const i=r(3387);class s{constructor(e,t){this.text=e,t&&(this.entities=t,this.parse_mode=void 0)}static normalise(e){return"string"==typeof e?new s(e):e}}t.FmtString=s;const n=Array.isArray,a=(e,t)=>{var r;const i=e.text.length;if(t instanceof s){e.text=`${e.text}${t.text}`;for(let s=0;s<((null===(r=t.entities)||void 0===r?void 0:r.length)||0);s++){const r=t.entities[s];e.entities.push({...r,offset:r.offset+i})}}else e.text=`${e.text}${t}`};t.join=(e,t)=>{const r=new s("");r.entities=[];const i=e[Symbol.iterator]();let n=i.next();for(;!n.done;)a(r,n.value),n=i.next(),t&&!n.done&&a(r,t);return r.entities.length?r.parse_mode=void 0:delete r.entities,r},t._fmt=function(e,r){return function(s,...a){var o;s=n(s)?s:[s];const l=(0,t.join)((0,i.zip)(s,a));return e&&(null!==(o=l.entities)&&void 0!==o||(l.entities=[]),l.entities.unshift({type:e,offset:0,length:l.text.length,...r}),l.parse_mode=void 0),l}},t.linkOrMention=(e,t)=>{const{text:r,entities:i=[]}=s.normalise(e);return i.unshift(Object.assign(t,{offset:0,length:r.length})),new s(r,i)}},3387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zip=t.fmtCaption=t.env=void 0,t.env=process.env,t.fmtCaption=function(e){if(!e)return;const t=e.caption;if(!t||"string"==typeof t)return e;const{text:r,entities:i}=t;return{...e,caption:r,...i&&{caption_entities:i,parse_mode:void 0}}},t.zip=function*(e,t){const r=e[Symbol.iterator](),i=t[Symbol.iterator]();let s=r.next(),n=i.next();for(;!s.done;)yield s.value,n.done||(yield n.value),s=r.next(),n=i.next();for(;!n.done;)yield n.value,n=i.next()}},67:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(3325)),l=n(r(5437)),u=n(r(9358)),c=n(r(1185)),h=a(r(3300)),d=r(7893),p=r(3377),m=a(r(8149)),f=a(r(8166)),g=r(8440),y=r(1227)("telegraf:client"),{isStream:v}=m.default,_=new Set(["answerCallbackQuery","answerInlineQuery","deleteMessage","leaveChat","sendChatAction"]),b={audio:"mp3",photo:"jpg",sticker:"webp",video:"mp4",animation:"mp4",video_note:"mp4",voice:"ogg"},w={apiRoot:"https://api.telegram.org",apiMode:"bot",webhookReply:!0,agent:new u.Agent({keepAlive:!0,keepAliveMsecs:1e4}),attachmentAgent:void 0,testEnv:!1};function C(e){return Object.values(e).some((e=>Array.isArray(e)?e.some((({media:e})=>e&&"object"==typeof e&&(e.source||e.url))):e&&"object"==typeof e&&((0,d.hasProp)(e,"source")&&e.source||(0,d.hasProp)(e,"url")&&e.url||(0,d.hasPropType)(e,"media","object")&&((0,d.hasProp)(e.media,"source")&&e.media.source||(0,d.hasProp)(e.media,"url")&&e.media.url))))}function k(e,t){if(null!=t)return t}const M=["results","reply_markup","mask_position","shipping_options","errors"];async function S(e,t){for(const t of M)(0,d.hasProp)(e,t)&&"string"!=typeof e[t]&&(e[t]=JSON.stringify(e[t]));const r=o.randomBytes(32).toString("hex"),i=new m.default(r),s=Object.keys(e).map((r=>async function(e,t,r,i){if(null!=r){if("string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r){if("thumb"===t){const s=o.randomBytes(16).toString("hex");return await A(e,r,s,i),e.addPart({headers:{"content-disposition":`form-data; name="${t}"`},body:`attach://${s}`})}if(Array.isArray(r)){const s=await Promise.all(r.map((async t=>{if("object"!=typeof t.media)return await Promise.resolve(t);const r=o.randomBytes(16).toString("hex");return await A(e,t.media,r,i),{...t,media:`attach://${r}`}})));return e.addPart({headers:{"content-disposition":`form-data; name="${t}"`},body:JSON.stringify(s)})}if(r&&"object"==typeof r&&(0,d.hasProp)(r,"media")&&(0,d.hasProp)(r,"type")&&void 0!==r.media&&void 0!==r.type){const s=o.randomBytes(16).toString("hex");return await A(e,r.media,s,i),e.addPart({headers:{"content-disposition":`form-data; name="${t}"`},body:JSON.stringify({...r,media:`attach://${s}`})})}return await A(e,r,t,i)}e.addPart({headers:{"content-disposition":`form-data; name="${t}"`},body:`${r}`})}}(i,r,e[r],t)));return await Promise.all(s),{method:"POST",compress:!0,headers:{"content-type":`multipart/form-data; boundary=${r}`,connection:"keep-alive"},body:i}}async function A(e,t,r,i){var s,n,a;let o=null!==(s=t.filename)&&void 0!==s?s:`${r}.${null!==(n=b[r])&&void 0!==n?n:"dat"}`;if(void 0!==t.url){const s=5e5,n=await(0,h.default)(t.url,{agent:i,timeout:s});return e.addPart({headers:{"content-disposition":`form-data; name="${r}"; filename="${o}"`},body:n.body})}if(t.source){let i=t.source;l.existsSync(t.source)&&(o=null!==(a=t.filename)&&void 0!==a?a:c.basename(t.source),i=l.createReadStream(t.source)),(v(i)||Buffer.isBuffer(i))&&e.addPart({headers:{"content-disposition":`form-data; name="${r}"; filename="${o}"`},body:i})}}function T(e){throw e.message=e.message.replace(/\/(bot|user)(\d+):[^/]+\//,"/$1$2:[REDACTED]/"),e}t.default=class{constructor(e,t,r){this.token=e,this.response=r,this.options={...w,...(0,p.compactOptions)(t)},this.options.apiRoot.startsWith("http://")&&(this.options.agent=void 0)}set webhookReply(e){this.options.webhookReply=e}get webhookReply(){return this.options.webhookReply}async callApi(e,t,{signal:r}={}){const{token:i,options:s,response:n}=this;if(s.webhookReply&&!1===(null==n?void 0:n.writableEnded)&&_.has(e))return y("Call via webhook",e,t),await async function(e,t,r){if(!C(t))return e.headersSent||e.setHeader("content-type","application/json"),e.end(JSON.stringify(t),"utf-8"),!0;const{headers:i,body:s}=await S(t,r.attachmentAgent);if(!e.headersSent)for(const[t,r]of Object.entries(i))e.setHeader(t,r);return await new Promise((t=>{e.on("finish",t),s.pipe(e)})),!0}(n,{method:e,...t},s);if(!i)throw new f.default({error_code:401,description:"Bot Token is required"});y("HTTP call",e,t);const a=C(t)?await S({method:e,...t},s.attachmentAgent):await function(e){return Promise.resolve({method:"POST",compress:!0,headers:{"content-type":"application/json",connection:"keep-alive"},body:JSON.stringify(e,k)})}(t),o=new g.URL(`./${s.apiMode}${i}${s.testEnv?"/test":""}/${e}`,s.apiRoot);a.agent=s.agent,a.signal=r,a.timeout=5e5;const l=await(0,h.default)(o,a).catch(T);if(l.status>=500){const r={error_code:l.status,description:l.statusText};throw new f.default(r,{method:e,payload:t})}const u=await l.json();if(!u.ok)throw y("API call failed",u),new f.default(u,{method:e,payload:t});return u.result}}},8166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelegramError=void 0;class r extends Error{constructor(e,t={}){super(`${e.error_code}: ${e.description}`),this.response=e,this.on=t}get code(){return this.response.error_code}get description(){return this.response.description}get parameters(){return this.response.parameters}}t.TelegramError=r,t.default=r},8149:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(9732)),l=r(7893),u=a(r(1063)),c="\r\n";class h extends u.default{constructor(e){super({head:`--${e}${c}`,tail:`${c}--${e}--`,separator:`${c}--${e}${c}`})}addPart(e){const t=new o.PassThrough;for(const[r,i]of Object.entries(e.headers))t.write(`${r}:${i}${c}`);t.write(c),h.isStream(e.body)?e.body.pipe(t):t.end(e.body),this.add(t)}static isStream(e){return"object"==typeof e&&null!==e&&(0,l.hasPropType)(e,"pipe","function")}}t.default=h},1758:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Polling=void 0;const s=i(r(8599)),n=i(r(1227)),a=r(1984),o=r(8166),l=(0,n.default)("telegraf:polling"),u=(0,a.promisify)(setTimeout),c=(h=Promise.resolve(),()=>h);var h;class d{constructor(e,t){this.telegram=e,this.allowedUpdates=t,this.abortController=new s.default,this.skipOffsetSync=!1,this.offset=0}async*[Symbol.asyncIterator](){var e,t;l("Starting long polling");do{try{const e=await this.telegram.callApi("getUpdates",{timeout:50,offset:this.offset,allowed_updates:this.allowedUpdates},this.abortController),t=e[e.length-1];void 0!==t&&(this.offset=t.update_id+1),yield e}catch(r){const i=r;if("AbortError"===i.name)return;if("FetchError"===i.name||i instanceof o.TelegramError&&429===i.code||i instanceof o.TelegramError&&i.code>=500){const r=null!==(t=null===(e=i.parameters)||void 0===e?void 0:e.retry_after)&&void 0!==t?t:5;l("Failed to fetch updates, retrying after %ds.",r,i),await u(1e3*r);continue}if(i instanceof o.TelegramError&&(401===i.code||409===i.code))throw this.skipOffsetSync=!0,i;throw i}}while(!this.abortController.signal.aborted)}async syncUpdateOffset(){this.skipOffsetSync||(l("Syncing update offset..."),await this.telegram.callApi("getUpdates",{offset:this.offset,limit:1}))}async loop(e){if(this.abortController.signal.aborted)throw new Error("Polling instances must not be reused!");try{for await(const t of this)await Promise.all(t.map(e))}finally{l("Long polling stopped"),this.stop(),await this.syncUpdateOffset().catch(c)}}stop(){this.abortController.abort()}}t.Polling=d},9859:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=(0,i(r(1227)).default)("telegraf:webhook");t.default=function(e,t){return async(r,i,n=(()=>{i.statusCode=403,s("Replying with status code",i.statusCode),i.end()}))=>{if(s("Incoming request",r.method,r.url),!e(r))return s("Webhook filter failed",r.method,r.url),n();let a;try{if(null!=r.body){let e=r.body;e instanceof Buffer&&(e=String(r.body)),"string"==typeof e&&(e=JSON.parse(e)),a=e}else{let e="";for await(const t of r)e+=String(t);a=JSON.parse(e)}}catch(e){return i.writeHead(415).end(),void s("Failed to parse request body:",e)}return await t(a,i)}}},4071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deunionize=void 0,t.deunionize=function(e){return e}},3556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allOf=t.anyOf=t.callbackQuery=t.editedChannelPost=t.channelPost=t.editedMessage=t.message=void 0,t.message=(...e)=>t=>{if(!("message"in t))return!1;for(const r of e)if(!(r in t.message))return!1;return!0},t.editedMessage=(...e)=>t=>{if(!("edited_message"in t))return!1;for(const r of e)if(!(r in t.edited_message))return!1;return!0},t.channelPost=(...e)=>t=>{if(!("channel_post"in t))return!1;for(const r of e)if(!(r in t.channel_post))return!1;return!0},t.editedChannelPost=(...e)=>t=>{if(!("edited_channel_post"in t))return!1;for(const r of e)if(!(r in t.edited_channel_post))return!1;return!0},t.callbackQuery=(...e)=>t=>{if(!("callback_query"in t))return!1;for(const r of e)if(!(r in t.callback_query))return!1;return!0},t.anyOf=(...e)=>t=>{for(const r of e)if(r(t))return!0;return!1},t.allOf=(...e)=>t=>{for(const r of e)if(!r(t))return!1;return!0}},8361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.join=t.mention=t.link=t.pre=t.code=t.underline=t.strikethrough=t.spoiler=t.italic=t.bold=t.fmt=t.FmtString=void 0;const i=r(6613);Object.defineProperty(t,"FmtString",{enumerable:!0,get:function(){return i.FmtString}}),Object.defineProperty(t,"join",{enumerable:!0,get:function(){return i.join}});const s=(0,i._fmt)();t.fmt=s;const n=(0,i._fmt)("bold");t.bold=n;const a=(0,i._fmt)("italic");t.italic=a;const o=(0,i._fmt)("spoiler");t.spoiler=o;const l=(0,i._fmt)("strikethrough");t.strikethrough=l;const u=(0,i._fmt)("underline");t.underline=u;const c=(0,i._fmt)("code");t.code=c,t.pre=e=>(0,i._fmt)("pre",{language:e});const h=(e,t)=>(0,i.linkOrMention)(e,{type:"text_link",url:t});t.link=h,t.mention=(e,t)=>"number"==typeof t?h(e,"tg://user?id="+t):(0,i.linkOrMention)(e,{type:"text_mention",user:t})},9061:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Scenes=t.MemorySessionStore=t.session=t.deunionize=t.Format=t.Input=t.Markup=t.Types=t.Telegram=t.TelegramError=t.Router=t.Composer=t.Context=t.Telegraf=void 0;var a=r(7870);Object.defineProperty(t,"Telegraf",{enumerable:!0,get:function(){return a.Telegraf}});var o=r(3152);Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return o.Context}});var l=r(2969);Object.defineProperty(t,"Composer",{enumerable:!0,get:function(){return l.Composer}});var u=r(3811);Object.defineProperty(t,"Router",{enumerable:!0,get:function(){return u.Router}});var c=r(8166);Object.defineProperty(t,"TelegramError",{enumerable:!0,get:function(){return c.TelegramError}});var h=r(778);Object.defineProperty(t,"Telegram",{enumerable:!0,get:function(){return h.Telegram}}),t.Types=n(r(996)),t.Markup=n(r(8898)),t.Input=n(r(9975)),t.Format=n(r(8361));var d=r(4071);Object.defineProperty(t,"deunionize",{enumerable:!0,get:function(){return d.deunionize}});var p=r(9414);Object.defineProperty(t,"session",{enumerable:!0,get:function(){return p.session}}),Object.defineProperty(t,"MemorySessionStore",{enumerable:!0,get:function(){return p.MemorySessionStore}}),t.Scenes=n(r(34))},9975:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromFileId=t.fromURL=t.fromURLStream=t.fromReadableStream=t.fromBuffer=t.fromLocalFile=void 0,t.fromLocalFile=(e,t)=>({source:e,filename:t}),t.fromBuffer=(e,t)=>({source:e,filename:t}),t.fromReadableStream=(e,t)=>({source:e,filename:t}),t.fromURLStream=(e,t)=>({url:e.toString(),filename:t}),t.fromURL=e=>e.toString(),t.fromFileId=e=>e},8898:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.inlineKeyboard=t.keyboard=t.forceReply=t.removeKeyboard=t.button=t.Markup=void 0;const a=r(7893);class o{constructor(e){this.reply_markup=e}selective(e=!0){return new o({...this.reply_markup,selective:e})}placeholder(e){return new o({...this.reply_markup,input_field_placeholder:e})}resize(e=!0){return new o({...this.reply_markup,resize_keyboard:e})}oneTime(e=!0){return new o({...this.reply_markup,one_time_keyboard:e})}persistent(e=!0){return new o({...this.reply_markup,is_persistent:e})}}function l(e,t){const r=[];if(!Array.isArray(e))return r;if((0,a.is2D)(e))return e.map((e=>e.filter((e=>!e.hide))));const i=void 0!==t.wrap?t.wrap:(e,r,i)=>i.length>=t.columns;let s=[],n=0;for(const t of e.filter((e=>!e.hide)))i(t,n,s)&&s.length>0&&(r.push(s),s=[]),s.push(t),n++;return s.length>0&&r.push(s),r}t.Markup=o,t.button=n(r(1835)),t.removeKeyboard=function(){return new o({remove_keyboard:!0})},t.forceReply=function(){return new o({force_reply:!0})},t.keyboard=function(e,t){const r=l(e,{columns:1,...t});return new o({keyboard:r})},t.inlineKeyboard=function(e,t){const r=l(e,{columns:e.length,...t});return new o({inline_keyboard:r})}},3811:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const s=i(r(2969));t.Router=class{constructor(e,t=new Map){if(this.routeFn=e,this.handlers=t,this.otherwiseHandler=s.default.passThru(),"function"!=typeof e)throw new Error("Missing routing function")}on(e,...t){if(0===t.length)throw new TypeError("At least one handler must be provided");return this.handlers.set(e,s.default.compose(t)),this}otherwise(...e){if(0===e.length)throw new TypeError("At least one otherwise handler must be provided");return this.otherwiseHandler=s.default.compose(e),this}middleware(){return s.default.lazy((e=>{var t;const r=this.routeFn(e);return null==r?this.otherwiseHandler:(Object.assign(e,r.context),Object.assign(e.state,r.state),null!==(t=this.handlers.get(r.route))&&void 0!==t?t:this.otherwiseHandler)}))}}},924:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseScene=void 0;const s=i(r(2969)),{compose:n}=s.default;class a extends s.default{constructor(e,t){const r={handlers:[],enterHandlers:[],leaveHandlers:[],...t};super(...r.handlers),this.id=e,this.ttl=r.ttl,this.enterHandler=n(r.enterHandlers),this.leaveHandler=n(r.leaveHandlers)}enter(...e){return this.enterHandler=n([this.enterHandler,...e]),this}leave(...e){return this.leaveHandler=n([this.leaveHandler,...e]),this}enterMiddleware(){return this.enterHandler}leaveMiddleware(){return this.leaveHandler}}t.BaseScene=a,t.default=a},40:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(2969)),n=(0,i(r(1227)).default)("telegraf:scenes:context"),a=()=>Promise.resolve(),o=()=>Math.floor(Date.now()/1e3);t.default=class{constructor(e,t,r){this.ctx=e,this.scenes=t,this.leaving=!1,this.options={defaultSession:{},...r}}get session(){var e,t;const r=Object.assign({},this.options.defaultSession);let i=null!==(t=null===(e=this.ctx.session)||void 0===e?void 0:e.__scenes)&&void 0!==t?t:r;return void 0!==i.expires&&i.expires<o()&&(i=r),void 0===this.ctx.session?this.ctx.session={__scenes:i}:this.ctx.session.__scenes=i,i}get state(){var e,t;return null!==(e=(t=this.session).state)&&void 0!==e?e:t.state={}}set state(e){this.session.state={...e}}get current(){var e;const t=null!==(e=this.session.current)&&void 0!==e?e:this.options.default;return void 0!==t&&this.scenes.has(t)?this.scenes.get(t):void 0}reset(){void 0!==this.ctx.session&&(this.ctx.session.__scenes=Object.assign({},this.options.defaultSession))}async enter(e,t={},r=!1){var i,s;if(!this.scenes.has(e))throw new Error(`Can't find scene: ${e}`);r||await this.leave(),n("Entering scene",e,t,r),this.session.current=e,this.state=t;const l=null!==(s=null===(i=this.current)||void 0===i?void 0:i.ttl)&&void 0!==s?s:this.options.ttl;if(void 0!==l&&(this.session.expires=o()+l),void 0===this.current||r)return;const u="enterMiddleware"in this.current&&"function"==typeof this.current.enterMiddleware?this.current.enterMiddleware():this.current.middleware();return await u(this.ctx,a)}reenter(){return void 0===this.session.current?void 0:this.enter(this.session.current,this.state)}async leave(){if(!this.leaving){n("Leaving scene");try{if(this.leaving=!0,void 0===this.current)return;const e="leaveMiddleware"in this.current&&"function"==typeof this.current.leaveMiddleware?this.current.leaveMiddleware():s.default.passThru();return await e(this.ctx,a),this.reset()}finally{this.leaving=!1}}}}},34:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WizardContextWizard=t.WizardScene=t.BaseScene=t.SceneContextScene=t.Stage=void 0;var s=r(5838);Object.defineProperty(t,"Stage",{enumerable:!0,get:function(){return s.Stage}});var n=r(40);Object.defineProperty(t,"SceneContextScene",{enumerable:!0,get:function(){return i(n).default}});var a=r(924);Object.defineProperty(t,"BaseScene",{enumerable:!0,get:function(){return a.BaseScene}});var o=r(2858);Object.defineProperty(t,"WizardScene",{enumerable:!0,get:function(){return o.WizardScene}});var l=r(2439);Object.defineProperty(t,"WizardContextWizard",{enumerable:!0,get:function(){return i(l).default}})},5838:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=void 0;const s=r(9414),n=i(r(40)),a=r(2969);class o extends a.Composer{constructor(e=[],t){super(),this.options={...t},this.scenes=new Map,e.forEach((e=>this.register(e)))}register(...e){return e.forEach((e=>{if(null==(null==e?void 0:e.id)||"function"!=typeof e.middleware)throw new Error("telegraf: Unsupported scene");this.scenes.set(e.id,e)})),this}middleware(){const e=a.Composer.compose([(e,t)=>{const r=this.scenes,i=new n.default(e,r,this.options);return e.scene=i,t()},super.middleware(),a.Composer.lazy((e=>{var t;return null!==(t=e.scene.current)&&void 0!==t?t:a.Composer.passThru()}))]);return a.Composer.optional(s.isSessionContext,e)}static enter(...e){return t=>t.scene.enter(...e)}static reenter(...e){return t=>t.scene.reenter(...e)}static leave(...e){return t=>t.scene.leave(...e)}}t.Stage=o},2439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){var r;this.ctx=e,this.steps=t,this.state=e.scene.state,this.cursor=null!==(r=e.scene.session.cursor)&&void 0!==r?r:0}get step(){return this.steps[this.cursor]}get cursor(){return this.ctx.scene.session.cursor}set cursor(e){this.ctx.scene.session.cursor=e}selectStep(e){return this.cursor=e,this}next(){return this.selectStep(this.cursor+1)}back(){return this.selectStep(this.cursor-1)}}},2858:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WizardScene=void 0;const s=i(r(924)),n=i(r(2439)),a=i(r(2969));class o extends s.default{constructor(e,t,...r){let i,s;"function"==typeof t||"middleware"in t?(i=void 0,s=[t,...r]):(i=t,s=r),super(e,i),this.steps=s}middleware(){return a.default.compose([(e,t)=>(e.wizard=new n.default(e,this.steps),t()),super.middleware(),(e,t)=>void 0===e.wizard.step?(e.wizard.selectStep(0),e.scene.leave()):a.default.unwrap(e.wizard.step)(e,t)])}enterMiddleware(){return a.default.compose([this.enterHandler,this.middleware()])}}t.WizardScene=o},9414:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isSessionContext=t.MemorySessionStore=t.session=void 0;const s=(0,i(r(1227)).default)("telegraf:session");function n(e){var t,r;const i=null===(t=e.from)||void 0===t?void 0:t.id,s=null===(r=e.chat)||void 0===r?void 0:r.id;if(null!=i&&null!=s)return`${i}:${s}`}t.session=function(e){var t,r,i;const o=null!==(t=null==e?void 0:e.property)&&void 0!==t?t:"session",l=null!==(r=null==e?void 0:e.getSessionKey)&&void 0!==r?r:n,u=null!==(i=null==e?void 0:e.store)&&void 0!==i?i:new a,c=new Map,h=new Map;return async(t,r)=>{var i;const n=t.update.update_id,a=await l(t);if(!a)return t[o]=void 0,await r();let d=c.get(a);if(d)s(`(${n}) found cached session, reusing from cache`),++d.counter;else{s(`(${n}) did not find cached session`);let r=h.get(a);r?s(`(${n}) found a concurrent request, reusing promise`):(s(`(${n}) fetching from upstream store`),r=u.get(a)),h.set(a,r);const o=await r;h.delete(a),s(`(${n}) updating cache`);const l=c.get(a);l?(l.counter++,d=l):(d={ref:null!=o?o:null===(i=null==e?void 0:e.defaultSession)||void 0===i?void 0:i.call(e,t),counter:1},c.set(a,d))}const p=d;let m=!1;Object.defineProperty(t,o,{get:()=>(m=!0,p.ref),set(e){m=!0,p.ref=e}});try{await r()}finally{0==--p.counter&&(s(`(${n}) refcounter reached 0, removing cached`),c.delete(a)),s(`(${n}) middlewares completed, checking session`),m&&(null==t[o]?(s(`(${n}) ctx.${o} missing, removing from store`),await u.delete(a)):(s(`(${n}) ctx.${o} found, updating store`),await u.set(a,t[o])))}}};class a{constructor(e=1/0){this.ttl=e,this.store=new Map}get(e){const t=this.store.get(e);if(null!=t){if(!(t.expires<Date.now()))return t.session;this.delete(e)}}set(e,t){const r=Date.now();this.store.set(e,{session:t,expires:r+this.ttl})}delete(e){this.store.delete(e)}}t.MemorySessionStore=a,t.isSessionContext=function(e){return"session"in e}},7870:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Telegraf=void 0;const o=n(r(3306)),l=n(r(403)),u=n(r(386)),c=r(2969),h=r(3377),d=a(r(3152)),p=a(r(1227)),m=a(r(9859)),f=r(1758),g=a(r(8147)),y=a(r(778)),v=r(6273),_=r(4439),b=(0,p.default)("telegraf:main"),w={telegram:{},handlerTimeout:9e4,contextType:d.default},C=(k=Promise.resolve(),()=>k);var k;class M extends c.Composer{constructor(e,t){super(),this.context={},this.webhookFilter=function(e){const t=(0,p.default)("telegraf:webhook");if("POST"===e.method)if(_(this.path,e.url)){if(!this.secretToken)return!0;{const r=e.headers["x-telegram-bot-api-secret-token"];if(_(this.secretToken,r))return!0;t("Secret token does not match:",r,this.secretToken)}}else t("Path does not match:",e.url,this.path);else t("Unexpected request method, not POST. Received:",e.method);return!1},this.handleError=(e,t)=>{throw process.exitCode=1,console.error("Unhandled error while processing",t.update),e},this.options={...w,...(0,h.compactOptions)(t)},this.telegram=new y.default(e,this.options.telegram),b("Created a `Telegraf` instance")}get token(){return this.telegram.token}set webhookReply(e){this.telegram.webhookReply=e}get webhookReply(){return this.telegram.webhookReply}catch(e){return this.handleError=e,this}webhookCallback(e="/",t={}){const{secretToken:r}=t;return(0,m.default)(this.webhookFilter.bind({hookPath:e,path:e,secretToken:r}),((e,t)=>this.handleUpdate(e,t)))}getDomainOpts(e){var t;const r=e.domain.startsWith("https://")||e.domain.startsWith("http://");r&&b("Unexpected protocol in domain, telegraf will use https:",e.domain);const i=r?new v.URL(e.domain).host:e.domain,s=null!==(t=e.path)&&void 0!==t?t:`/telegraf/${this.secretPathComponent()}`;return{domain:i,path:s,url:`https://${i}${s}`}}async createWebhook(e){const{domain:t,path:r,...i}=e,s=this.getDomainOpts({domain:t,path:r});return await this.telegram.setWebhook(s.url,i),b(`Webhook set to ${s.url}`),this.webhookCallback(s.path,{secretToken:i.secret_token})}startPolling(e=[]){return this.polling=new f.Polling(this.telegram,e),this.polling.loop((async e=>{await this.handleUpdate(e)}))}startWebhook(e,t,r,i,s,n){const a=this.webhookCallback(e,{secretToken:n}),o="function"==typeof s?(e,t)=>a(e,t,(()=>s(e,t))):a;return this.webhookServer=null!=t?u.createServer(t,o):l.createServer(o),this.webhookServer.listen(r,i,(()=>{b("Webhook listening on port: %s",r)})),this}secretPathComponent(){return o.createHash("sha3-256").update(this.token).update(process.version).digest("hex")}async launch(e={}){var t,r;if(b("Connecting to Telegram"),null!==(t=this.botInfo)&&void 0!==t||(this.botInfo=await this.telegram.getMe()),b(`Launching @${this.botInfo.username}`),void 0===e.webhook)return await this.telegram.deleteWebhook({drop_pending_updates:e.dropPendingUpdates}),b("Bot started with long polling"),void await this.startPolling(e.allowedUpdates);const i=this.getDomainOpts({domain:e.webhook.domain,path:null!==(r=e.webhook.path)&&void 0!==r?r:e.webhook.hookPath}),{tlsOptions:s,port:n,host:a,cb:o,secretToken:l}=e.webhook;this.startWebhook(i.path,s,n,a,o,l),await this.telegram.setWebhook(i.url,{drop_pending_updates:e.dropPendingUpdates,allowed_updates:e.allowedUpdates,ip_address:e.webhook.ipAddress,max_connections:e.webhook.maxConnections,secret_token:e.webhook.secretToken,certificate:e.webhook.certificate}),b(`Bot started with webhook @ ${i.url}`)}stop(e="unspecified"){var t,r;if(b("Stopping bot... Reason:",e),void 0===this.polling&&void 0===this.webhookServer)throw new Error("Bot is not running!");null===(t=this.webhookServer)||void 0===t||t.close(),null===(r=this.polling)||void 0===r||r.stop()}async handleUpdate(e,t){var r,i;null!==(r=this.botInfo)&&void 0!==r||(this.botInfo=(b("Update %d is waiting for `botInfo` to be initialized",e.update_id),await(null!==(i=this.botInfoCall)&&void 0!==i?i:this.botInfoCall=this.telegram.getMe()))),b("Processing update",e.update_id);const s=new y.default(this.token,this.telegram.options,t),n=new(0,this.options.contextType)(e,s,this.botInfo);Object.assign(n,this.context);try{await(0,g.default)(Promise.resolve(this.middleware()(n,C)),this.options.handlerTimeout)}catch(e){return await this.handleError(e,n)}finally{!1===(null==t?void 0:t.writableEnded)&&t.end(),b("Finished processing update",e.update_id)}}}t.Telegraf=M},996:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Markup=void 0;var i=r(8898);Object.defineProperty(t,"Markup",{enumerable:!0,get:function(){return i.Markup}})},778:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Telegram=void 0;const s=i(r(67)),n=r(9191),a=r(6273),o=r(8361),l=r(3387);class u extends s.default{getMe(){return this.callApi("getMe",{})}getFile(e){return this.callApi("getFile",{file_id:e})}async getFileLink(e){if("string"==typeof e?e=await this.getFile(e):void 0===e.file_path&&(e=await this.getFile(e.file_id)),void 0!==e.file_path&&(0,n.isAbsolute)(e.file_path)){const t=new a.URL(this.options.apiRoot);return t.port="",t.pathname=e.file_path,t.protocol="file:",t}return new a.URL(`./file/${this.options.apiMode}${this.token}/${e.file_path}`,this.options.apiRoot)}getUpdates(e,t,r,i){return this.callApi("getUpdates",{allowed_updates:i,limit:t,offset:r,timeout:e})}getWebhookInfo(){return this.callApi("getWebhookInfo",{})}getGameHighScores(e,t,r,i){return this.callApi("getGameHighScores",{user_id:e,inline_message_id:t,chat_id:r,message_id:i})}setGameScore(e,t,r,i,s,n=!0,a=!1){return this.callApi("setGameScore",{force:a,score:t,user_id:e,inline_message_id:r,chat_id:i,message_id:s,disable_edit_message:!n})}setWebhook(e,t){return this.callApi("setWebhook",{url:e,...t})}deleteWebhook(e){return this.callApi("deleteWebhook",{...e})}sendMessage(e,t,r){const i=o.FmtString.normalise(t);return this.callApi("sendMessage",{chat_id:e,...r,...i})}forwardMessage(e,t,r,i){return this.callApi("forwardMessage",{chat_id:e,from_chat_id:t,message_id:r,...i})}sendChatAction(e,t,r){return this.callApi("sendChatAction",{chat_id:e,action:t,...r})}getUserProfilePhotos(e,t,r){return this.callApi("getUserProfilePhotos",{user_id:e,offset:t,limit:r})}sendLocation(e,t,r,i){return this.callApi("sendLocation",{chat_id:e,latitude:t,longitude:r,...i})}sendVenue(e,t,r,i,s,n){return this.callApi("sendVenue",{latitude:t,longitude:r,title:i,address:s,chat_id:e,...n})}sendInvoice(e,t,r){return this.callApi("sendInvoice",{chat_id:e,...t,...r})}sendContact(e,t,r,i){return this.callApi("sendContact",{chat_id:e,phone_number:t,first_name:r,...i})}sendPhoto(e,t,r){return this.callApi("sendPhoto",{chat_id:e,photo:t,...(0,l.fmtCaption)(r)})}sendDice(e,t){return this.callApi("sendDice",{chat_id:e,...t})}sendDocument(e,t,r){return this.callApi("sendDocument",{chat_id:e,document:t,...(0,l.fmtCaption)(r)})}sendAudio(e,t,r){return this.callApi("sendAudio",{chat_id:e,audio:t,...(0,l.fmtCaption)(r)})}sendSticker(e,t,r){return this.callApi("sendSticker",{chat_id:e,sticker:t,...r})}sendVideo(e,t,r){return this.callApi("sendVideo",{chat_id:e,video:t,...(0,l.fmtCaption)(r)})}sendAnimation(e,t,r){return this.callApi("sendAnimation",{chat_id:e,animation:t,...(0,l.fmtCaption)(r)})}sendVideoNote(e,t,r){return this.callApi("sendVideoNote",{chat_id:e,video_note:t,...r})}sendVoice(e,t,r){return this.callApi("sendVoice",{chat_id:e,voice:t,...(0,l.fmtCaption)(r)})}sendGame(e,t,r){return this.callApi("sendGame",{chat_id:e,game_short_name:t,...r})}sendMediaGroup(e,t,r){return this.callApi("sendMediaGroup",{chat_id:e,media:t,...r})}sendPoll(e,t,r,i){return this.callApi("sendPoll",{chat_id:e,type:"regular",question:t,options:r,...i})}sendQuiz(e,t,r,i){return this.callApi("sendPoll",{chat_id:e,type:"quiz",question:t,options:r,...i})}stopPoll(e,t,r){return this.callApi("stopPoll",{chat_id:e,message_id:t,...r})}getChat(e){return this.callApi("getChat",{chat_id:e})}getChatAdministrators(e){return this.callApi("getChatAdministrators",{chat_id:e})}getChatMember(e,t){return this.callApi("getChatMember",{chat_id:e,user_id:t})}getChatMembersCount(e){return this.callApi("getChatMembersCount",{chat_id:e})}answerInlineQuery(e,t,r){return this.callApi("answerInlineQuery",{inline_query_id:e,results:t,...r})}setChatPermissions(e,t,r){return this.callApi("setChatPermissions",{chat_id:e,permissions:t,...r})}banChatMember(e,t,r,i){return this.callApi("banChatMember",{chat_id:e,user_id:t,until_date:r,...i})}get kickChatMember(){return this.banChatMember}promoteChatMember(e,t,r){return this.callApi("promoteChatMember",{chat_id:e,user_id:t,...r})}restrictChatMember(e,t,r){return this.callApi("restrictChatMember",{chat_id:e,user_id:t,...r})}setChatAdministratorCustomTitle(e,t,r){return this.callApi("setChatAdministratorCustomTitle",{chat_id:e,user_id:t,custom_title:r})}exportChatInviteLink(e){return this.callApi("exportChatInviteLink",{chat_id:e})}createChatInviteLink(e,t){return this.callApi("createChatInviteLink",{chat_id:e,...t})}createInvoiceLink(e){return this.callApi("createInvoiceLink",{...e})}editChatInviteLink(e,t,r){return this.callApi("editChatInviteLink",{chat_id:e,invite_link:t,...r})}revokeChatInviteLink(e,t){return this.callApi("revokeChatInviteLink",{chat_id:e,invite_link:t})}setChatPhoto(e,t){return this.callApi("setChatPhoto",{chat_id:e,photo:t})}deleteChatPhoto(e){return this.callApi("deleteChatPhoto",{chat_id:e})}setChatTitle(e,t){return this.callApi("setChatTitle",{chat_id:e,title:t})}setChatDescription(e,t){return this.callApi("setChatDescription",{chat_id:e,description:t})}pinChatMessage(e,t,r){return this.callApi("pinChatMessage",{chat_id:e,message_id:t,...r})}unpinChatMessage(e,t){return this.callApi("unpinChatMessage",{chat_id:e,message_id:t})}unpinAllChatMessages(e){return this.callApi("unpinAllChatMessages",{chat_id:e})}leaveChat(e){return this.callApi("leaveChat",{chat_id:e})}unbanChatMember(e,t,r){return this.callApi("unbanChatMember",{chat_id:e,user_id:t,...r})}answerCbQuery(e,t,r){return this.callApi("answerCallbackQuery",{text:t,callback_query_id:e,...r})}answerGameQuery(e,t){return this.callApi("answerCallbackQuery",{url:t,callback_query_id:e})}answerShippingQuery(e,t,r,i){return this.callApi("answerShippingQuery",{ok:t,shipping_query_id:e,shipping_options:r,error_message:i})}answerPreCheckoutQuery(e,t,r){return this.callApi("answerPreCheckoutQuery",{ok:t,pre_checkout_query_id:e,error_message:r})}answerWebAppQuery(e,t){return this.callApi("answerWebAppQuery",{web_app_query_id:e,result:t})}editMessageText(e,t,r,i,s){const n=o.FmtString.normalise(i);return this.callApi("editMessageText",{chat_id:e,message_id:t,inline_message_id:r,...s,...n})}editMessageCaption(e,t,r,i,s){return this.callApi("editMessageCaption",{chat_id:e,message_id:t,inline_message_id:r,...s,...(0,l.fmtCaption)({caption:i})})}editMessageMedia(e,t,r,i,s){return this.callApi("editMessageMedia",{chat_id:e,message_id:t,inline_message_id:r,media:(0,l.fmtCaption)(i),...s})}editMessageReplyMarkup(e,t,r,i){return this.callApi("editMessageReplyMarkup",{chat_id:e,message_id:t,inline_message_id:r,reply_markup:i})}editMessageLiveLocation(e,t,r,i,s,n){return this.callApi("editMessageLiveLocation",{latitude:i,longitude:s,chat_id:e,message_id:t,inline_message_id:r,...n})}stopMessageLiveLocation(e,t,r,i){return this.callApi("stopMessageLiveLocation",{chat_id:e,message_id:t,inline_message_id:r,reply_markup:i})}deleteMessage(e,t){return this.callApi("deleteMessage",{chat_id:e,message_id:t})}setChatStickerSet(e,t){return this.callApi("setChatStickerSet",{chat_id:e,sticker_set_name:t})}deleteChatStickerSet(e){return this.callApi("deleteChatStickerSet",{chat_id:e})}getForumTopicIconStickers(){return this.callApi("getForumTopicIconStickers",{})}createForumTopic(e,t,r){return this.callApi("createForumTopic",{chat_id:e,name:t,...r})}editForumTopic(e,t,r){return this.callApi("editForumTopic",{chat_id:e,message_thread_id:t,...r})}closeForumTopic(e,t){return this.callApi("closeForumTopic",{chat_id:e,message_thread_id:t})}reopenForumTopic(e,t){return this.callApi("reopenForumTopic",{chat_id:e,message_thread_id:t})}deleteForumTopic(e,t){return this.callApi("deleteForumTopic",{chat_id:e,message_thread_id:t})}unpinAllForumTopicMessages(e,t){return this.callApi("unpinAllForumTopicMessages",{chat_id:e,message_thread_id:t})}editGeneralForumTopic(e,t){return this.callApi("editGeneralForumTopic",{chat_id:e,name:t})}closeGeneralForumTopic(e){return this.callApi("closeGeneralForumTopic",{chat_id:e})}reopenGeneralForumTopic(e){return this.callApi("reopenGeneralForumTopic",{chat_id:e})}hideGeneralForumTopic(e){return this.callApi("hideGeneralForumTopic",{chat_id:e})}unhideGeneralForumTopic(e){return this.callApi("unhideGeneralForumTopic",{chat_id:e})}unpinAllGeneralForumTopicMessages(e){return this.callApi("unpinAllGeneralForumTopicMessages",{chat_id:e})}getStickerSet(e){return this.callApi("getStickerSet",{name:e})}uploadStickerFile(e,t,r){return this.callApi("uploadStickerFile",{user_id:e,sticker_format:r,sticker:t})}createNewStickerSet(e,t,r,i){return this.callApi("createNewStickerSet",{name:t,title:r,user_id:e,...i})}addStickerToSet(e,t,r){return this.callApi("addStickerToSet",{name:t,user_id:e,...r})}setStickerPositionInSet(e,t){return this.callApi("setStickerPositionInSet",{sticker:e,position:t})}get setStickerSetThumb(){return this.setStickerSetThumbnail}setStickerSetThumbnail(e,t,r){return this.callApi("setStickerSetThumbnail",{name:e,user_id:t,thumbnail:r})}setStickerMaskPosition(e,t){return this.callApi("setStickerMaskPosition",{sticker:e,mask_position:t})}setStickerKeywords(e,t){return this.callApi("setStickerKeywords",{sticker:e,keywords:t})}setStickerEmojiList(e,t){return this.callApi("setStickerEmojiList",{sticker:e,emoji_list:t})}deleteStickerSet(e){return this.callApi("deleteStickerSet",{name:e})}setStickerSetTitle(e,t){return this.callApi("setStickerSetTitle",{name:e,title:t})}setCustomEmojiStickerSetThumbnail(e,t){return this.callApi("setCustomEmojiStickerSetThumbnail",{name:e,custom_emoji_id:t})}deleteStickerFromSet(e){return this.callApi("deleteStickerFromSet",{sticker:e})}getCustomEmojiStickers(e){return this.callApi("getCustomEmojiStickers",{custom_emoji_ids:e})}setMyCommands(e,t){return this.callApi("setMyCommands",{commands:e,...t})}deleteMyCommands(e={}){return this.callApi("deleteMyCommands",e)}getMyCommands(e={}){return this.callApi("getMyCommands",e)}setMyDescription(e,t){return this.callApi("setMyDescription",{description:e,language_code:t})}setMyName(e,t){return this.callApi("setMyName",{name:e,language_code:t})}getMyName(e){return this.callApi("getMyName",{language_code:e})}getMyDescription(e){return this.callApi("getMyDescription",{language_code:e})}setMyShortDescription(e,t){return this.callApi("setMyShortDescription",{short_description:e,language_code:t})}getMyShortDescription(e){return this.callApi("getMyShortDescription",{language_code:e})}setPassportDataErrors(e,t){return this.callApi("setPassportDataErrors",{user_id:e,errors:t})}sendCopy(e,t,r){return this.copyMessage(e,t.chat.id,t.message_id,r)}copyMessage(e,t,r,i){return this.callApi("copyMessage",{chat_id:e,from_chat_id:t,message_id:r,...(0,l.fmtCaption)(i)})}approveChatJoinRequest(e,t){return this.callApi("approveChatJoinRequest",{chat_id:e,user_id:t})}declineChatJoinRequest(e,t){return this.callApi("declineChatJoinRequest",{chat_id:e,user_id:t})}banChatSenderChat(e,t,r){return this.callApi("banChatSenderChat",{chat_id:e,sender_chat_id:t,...r})}unbanChatSenderChat(e,t){return this.callApi("unbanChatSenderChat",{chat_id:e,sender_chat_id:t})}setChatMenuButton({chatId:e,menuButton:t}={}){return this.callApi("setChatMenuButton",{chat_id:e,menu_button:t})}getChatMenuButton({chatId:e}={}){return this.callApi("getChatMenuButton",{chat_id:e})}setMyDefaultAdministratorRights({rights:e,forChannels:t}={}){return this.callApi("setMyDefaultAdministratorRights",{rights:e,for_channels:t})}getMyDefaultAdministratorRights({forChannels:e}={}){return this.callApi("getMyDefaultAdministratorRights",{for_channels:e})}logOut(){return this.callApi("logOut",{})}close(){return this.callApi("close",{})}}t.Telegram=u,t.default=u},1063:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SandwichStream:()=>s,default:()=>n});var i=r(3952);class s extends i.Readable{constructor(e){var{head:t,tail:r,separator:i}=e;super(function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&(r[i[s]]=e[i[s]])}return r}(e,["head","tail","separator"])),this.streamsActive=!1,this.streams=[],this.newStreams=[],this.currentStream=null,this.head=null!=t?t:null,this.tail=null!=r?r:null,this.separator=null!=i?i:null}add(e){return!1===this.streamsActive?(this.streams.push(e),e.on("error",this.subStreamOnError.bind(this))):this.newStreams.push(e),this}_read(){!1===this.streamsActive&&(this.streamsActive=!0,this.pushHead(),this.streamNextStream())}subStreamOnError(e){this.emit("error",e)}streamNextStream(){!0===this.nextStream()?this.bindCurrentStreamEvents():(this.pushTail(),this.push(null))}nextStream(){const e=this.streams.shift();return this.currentStream=void 0!==e?e:null,null!==this.currentStream}bindCurrentStreamEvents(){this.currentStream.on("readable",this.currentStreamOnReadable.bind(this)),this.currentStream.on("end",this.currentStreamOnEnd.bind(this))}currentStreamOnReadable(){const e=this.currentStream.read(),t=null!=e?e:"";this.push(t)}currentStreamOnEnd(){this.pushSeparator(),this.streams.concat(this.newStreams),this.newStreams=[],this.streamNextStream()}pushHead(){null!==this.head&&this.push(this.head)}pushSeparator(){0<this.streams.length&&null!==this.separator&&this.push(this.separator)}pushTail(){null!==this.tail&&this.push(this.tail)}}const n=s},9968:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.3.1","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"funding":"https://github.com/motdotla/dotenv?sponsor=1","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3","decache":"^4.6.1","sinon":"^14.0.1","standard":"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0","tap":"^16.3.0","tar":"^6.1.11","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(366)})();